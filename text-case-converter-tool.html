<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Text Case Converter — Tool Tap</title>
<link rel="icon" href="favicon_io/favicon-16x16.png" type="image/x-icon">
<style>
  :root{
    --blue:#1677ff; --blue-2:#0f5ed7; --bg:#eef6ff; --muted:#5b6b8a;
    --white:#fff; --card-radius:16px; --shadow: 0 12px 32px rgba(13,46,98,0.06);
    --glass: rgba(255,255,255,0.7);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--bg),#fff);font-family:Inter,system-ui,Segoe UI,Arial,sans-serif;color:#0b2338}
  .wrap{max-width:980px;margin:40px auto;padding:22px;background:var(--white);border-radius:var(--card-radius);box-shadow:var(--shadow);animation:cardEnter .5s ease both}
  @keyframes cardEnter{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:none}}
  .header{display:flex;gap:14px;align-items:center;margin-bottom:12px}
  .brand{background:linear-gradient(90deg,var(--blue),var(--blue-2));color:#fff;padding:10px 14px;border-radius:10px;font-weight:800;box-shadow:0 8px 24px rgba(22,119,255,0.12)}
  h1{margin:0;font-size:1.25rem}
  p.lead{margin:4px 0 0;color:var(--muted);font-size:0.95rem}

  .grid{display:grid;grid-template-columns:1fr 340px;gap:18px;margin-top:18px}
  @media(max-width:980px){.grid{grid-template-columns:1fr}}

  .left{display:flex;flex-direction:column;gap:12px}
  textarea.input{
    width:100%;min-height:220px;padding:14px;border-radius:12px;border:2px solid rgba(22,119,255,0.08);
    background:#f7fbff;font-size:15px;line-height:1.6;outline:none;transition:box-shadow .18s
  }
  textarea.input:focus{box-shadow:0 12px 28px rgba(22,119,255,0.08);border-color:var(--blue-2)}

  .controls{display:flex;gap:10px;flex-wrap:wrap;align-items:center;justify-content:space-between}
  .modes{display:flex;gap:8px;flex-wrap:wrap}
  .mode-btn{background:transparent;border:2px solid rgba(22,119,255,0.10);padding:10px 12px;border-radius:10px;cursor:pointer;color:var(--muted);font-weight:700}
  .mode-btn.active{background:linear-gradient(90deg,var(--blue),var(--blue-2));color:#fff;border-color:transparent;box-shadow:0 8px 24px rgba(22,119,255,0.12)}
  .actions{display:flex;gap:8px;align-items:center}
  .btn{background:var(--blue);color:#fff;border:none;padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer;box-shadow:0 8px 22px rgba(22,119,255,0.10)}
  .btn.ghost{background:transparent;border:2px solid rgba(22,119,255,0.10);color:var(--blue);font-weight:700}
  .tiny{font-size:0.9rem;color:var(--muted)}

  /* Right panel */
  .right{display:flex;flex-direction:column;gap:12px}
  .panel{background:linear-gradient(180deg,#fff,#fbfdff);padding:14px;border-radius:12px;border:1px solid rgba(16,64,160,0.03)}
  .panel .title{font-weight:800;color:var(--blue-2);margin-bottom:10px}
  .preview{min-height:160px;max-height:360px;overflow:auto;padding:12px;border-radius:10px;border:1px dashed rgba(22,119,255,0.06);background:#fcfeff;color:#08304f;white-space:pre-wrap}
  .stats{display:flex;gap:8px;flex-wrap:wrap;margin-top:10px}
  .stat{background:var(--bg);padding:10px;border-radius:10px;min-width:110px;text-align:center;color:var(--blue-2);font-weight:800}

  .actions-bottom{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
  .link{color:var(--blue);text-decoration:none;font-weight:700}

  .footer{margin-top:18px;text-align:center;color:var(--muted);font-size:0.92rem}

  /* micro animations */
  .flash{animation:flashC .28s ease}
  @keyframes flashC{0%{transform:translateY(-6px)}100%{transform:none}}

  @media(max-width:520px){
    textarea.input{min-height:160px}
    .brand{display:none}
  }
</style>
</head>
<body>
  <main class="wrap" role="main" aria-labelledby="title">
    <div class="header">
      <div class="brand">Tool Tap</div>
      <div>
        <h1 id="title">Text Case Converter</h1>
        <p class="lead">Instantly convert text between Uppercase, Lowercase, Title Case, Sentence Case, or Toggle Case. Copy, clear or download results — matching your Tools Tap theme.</p>
      </div>
    </div>

    <section class="grid">
      <!-- Left: editor and controls -->
      <div class="left" aria-label="Editor">
        <label for="inputText" class="tiny">Input Text</label>
        <textarea id="inputText" class="input" placeholder="Paste or type text here..."></textarea>

        <div class="controls" role="toolbar" aria-label="Case controls">
          <div class="modes" role="tablist" aria-label="Conversion modes">
            <button class="mode-btn" data-mode="uppercase" id="mUpper">UPPERCASE</button>
            <button class="mode-btn" data-mode="lowercase" id="mLower">lowercase</button>
            <button class="mode-btn" data-mode="title" id="mTitle">Title Case</button>
            <button class="mode-btn" data-mode="sentence" id="mSentence">Sentence case</button>
            <button class="mode-btn" data-mode="toggle" id="mToggle">Toggle Case</button>
          </div>

          <div class="actions">
            <button id="convertBtn" class="btn">Convert</button>
            <button id="clearBtn" class="btn ghost">Clear</button>
          </div>
        </div>

        <div style="display:flex;justify-content:space-between;align-items:center;margin-top:6px">
          <div class="tiny">Tip: select a mode then press Convert. Ctrl+Enter also works.</div>
          <div style="display:flex;gap:8px">
            <button id="copyInput" class="btn ghost">Copy Input</button>
            <button id="downloadInput" class="btn ghost" style="display:none">Download</button>
          </div>
        </div>
      </div>

      <!-- Right: preview and stats -->
      <aside class="right" aria-label="Preview & actions">
        <div class="panel" aria-live="polite">
          <div class="title">Preview</div>
          <div id="preview" class="preview">Converted text will show here after you press Convert.</div>

          <div class="stats" aria-hidden="false">
            <div class="stat">Chars <div id="chars" style="font-size:1.1rem;margin-top:6px">0</div></div>
            <div class="stat">Words <div id="words" style="font-size:1.1rem;margin-top:6px">0</div></div>
            <div class="stat">Lines <div id="lines" style="font-size:1.1rem;margin-top:6px">0</div></div>
          </div>

          <div class="actions-bottom">
            <button id="copyPreview" class="btn ghost">Copy Output</button>
            <button id="downloadPreviewBtn" class="btn">Download .txt</button>
            <a id="downloadPreviewLink" style="display:none"></a>
          </div>
        </div>

        <div class="panel">
          <div class="title">How it works</div>
          <div class="tiny" style="color:var(--muted)">
            • Uppercase / Lowercase: converts all letters.<br>
            • Title Case: capitalizes main words (simple heuristic).<br>
            • Sentence Case: capitalizes after period, question, exclamation.<br>
            • Toggle Case: switches letter case for each character.
          </div>
        </div>
      </aside>
    </section>

    <div class="footer">Tool Tap © 2025</div>
  </main>

<script>
  // Elements
  const input = document.getElementById('inputText');
  const preview = document.getElementById('preview');
  const convertBtn = document.getElementById('convertBtn');
  const clearBtn = document.getElementById('clearBtn');
  const copyInputBtn = document.getElementById('copyInput');
  const copyPreviewBtn = document.getElementById('copyPreview');
  const downloadPreviewBtn = document.getElementById('downloadPreviewBtn');
  const downloadPreviewLink = document.getElementById('downloadPreviewLink');

  const modeButtons = document.querySelectorAll('.mode-btn');
  let selectedMode = 'uppercase'; // default

  // Utilities: case conversions
  function toTitleCase(str){
    // Basic title case: capitalize words except small stop-words (simple)
    const small = new Set(['a','an','the','and','or','but','for','nor','on','at','to','from','by','of','in','with']);
    return str.toLowerCase().split(/(\s+)/).map(token => {
      if(/\s+/.test(token)) return token;
      const word = token.replace(/(^[^A-Za-z]*|[^A-Za-z]*$)/g, ''); // trim punctuation edges
      const rest = token.slice(word.length ? token.indexOf(word)+word.length : 0);
      if(!word) return token;
      const lower = word.toLowerCase();
      if(small.has(lower)) return lower + rest;
      return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase() + rest;
    }).join('');
  }

  function toSentenceCase(str){
    // Lowercase everything first, then capitalize after sentence endings.
    const s = str.toLowerCase();
    // split by sentence enders while keeping them
    return s.replace(/(^\s*\w|[\.!\?]\s*\w)/g, c => c.toUpperCase());
  }

  function toToggleCase(str){
    return Array.from(str).map(ch => {
      if(ch >= 'a' && ch <= 'z') return ch.toUpperCase();
      if(ch >= 'A' && ch <= 'Z') return ch.toLowerCase();
      return ch;
    }).join('');
  }

  function countStats(text){
    const chars = text.length;
    const words = (text.trim() ? (text.match(/\b\S+\b/g) || []).length : 0);
    const lines = text ? text.split(/\r?\n/).length : 0;
    return { chars, words, lines };
  }

  function updatePreviewAndStats(text){
    preview.textContent = text || 'Converted text will show here after you press Convert.';
    const s = countStats(text || '');
    document.getElementById('chars').textContent = s.chars;
    document.getElementById('words').textContent = s.words;
    document.getElementById('lines').textContent = s.lines;

    // prepare download link
    if(text){
      const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
      const url = URL.createObjectURL(blob);
      downloadPreviewLink.href = url;
      downloadPreviewLink.download = 'converted.txt';
      downloadPreviewLink.style.display = 'inline';
    } else {
      downloadPreviewLink.style.display = 'none';
      if(downloadPreviewLink.href){ URL.revokeObjectURL(downloadPreviewLink.href); downloadPreviewLink.removeAttribute('href'); }
    }
  }

  // Mode buttons
  modeButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      modeButtons.forEach(b => b.classList.remove('active'));
      btn.classList.add('active');
      selectedMode = btn.getAttribute('data-mode');
    });
  });
  // set default active
  document.querySelector('.mode-btn[data-mode="uppercase"]').classList.add('active');

  // Convert handler
  function convertAction(){
    const txt = input.value;
    if(!txt.trim()){
      preview.textContent = 'Please enter text to convert.';
      preview.classList.remove('flash'); void preview.offsetWidth; preview.classList.add('flash');
      updatePreviewAndStats('');
      return;
    }
    let result = '';
    switch(selectedMode){
      case 'uppercase': result = txt.toUpperCase(); break;
      case 'lowercase': result = txt.toLowerCase(); break;
      case 'title': result = toTitleCase(txt); break;
      case 'sentence': result = toSentenceCase(txt); break;
      case 'toggle': result = toToggleCase(txt); break;
      default: result = txt;
    }
    updatePreviewAndStats(result);
    preview.classList.remove('flash'); void preview.offsetWidth; preview.classList.add('flash');
  }

  convertBtn.addEventListener('click', () => {
    convertBtn.style.transform = 'scale(0.98)';
    setTimeout(()=> convertBtn.style.transform = '', 150);
    convertAction();
  });

  // keyboard shortcut Ctrl+Enter
  input.addEventListener('keydown', e => {
    if(e.ctrlKey && e.key === 'Enter') convertAction();
  });

  clearBtn.addEventListener('click', () => {
    input.value = '';
    updatePreviewAndStats('');
  });

  copyInput.addEventListener('click', async () => {
    const v = input.value || '';
    if(!v) { input.classList.remove('flash'); void input.offsetWidth; input.classList.add('flash'); return; }
    try{ await navigator.clipboard.writeText(v); copyInput.textContent = 'Copied!'; setTimeout(()=> copyInput.textContent = 'Copy Input', 1200); } catch(e){ copyInput.textContent = 'Copied'; setTimeout(()=> copyInput.textContent = 'Copy Input', 1200); }
  });

  copyPreviewBtn.addEventListener('click', async () => {
    const v = preview.textContent || '';
    if(!v) { preview.classList.remove('flash'); void preview.offsetWidth; preview.classList.add('flash'); return; }
    try{ await navigator.clipboard.writeText(v); copyPreviewBtn.textContent = 'Copied!'; setTimeout(()=> copyPreviewBtn.textContent = 'Copy Output', 1200); } catch(e){ copyPreviewBtn.textContent = 'Copied'; setTimeout(()=> copyPreviewBtn.textContent = 'Copy Output', 1200); }
  });

  downloadPreviewBtn.addEventListener('click', () => {
    const v = preview.textContent || '';
    if(!v) { preview.classList.remove('flash'); void preview.offsetWidth; preview.classList.add('flash'); return; }
    // use prepared link or create on the fly
    if(downloadPreviewLink.href){
      const a = document.createElement('a'); a.href = downloadPreviewLink.href; a.download = downloadPreviewLink.download || 'converted.txt'; document.body.appendChild(a); a.click(); a.remove();
    } else {
      const blob = new Blob([v], { type: 'text/plain;charset=utf-8' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'converted.txt'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    }
  });

  // Init empty preview
  updatePreviewAndStats('');

  // accessibility: focus outline visible
  input.addEventListener('focus', ()=> input.style.boxShadow = '0 12px 28px rgba(22,119,255,0.08)');
  input.addEventListener('blur', ()=> input.style.boxShadow = '');
</script>
</body>
</html>
