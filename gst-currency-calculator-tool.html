<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Currency Converter | Tool Tap Fix</title>
<link rel="icon" href="favicon_io/favicon-16x16.png" type="image/x-icon">
<style>
  /* (Use your existing styling) */
  body { font-family: Poppins, sans-serif; background: #eef6ff; display: flex; justify-content: center; align-items: center; height: 100vh; margin:0; }
  .container { background: #fff; padding: 30px; border-radius: 16px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 90%; max-width: 450px; text-align: center; }
  input, select, button { width: 100%; margin-top: 10px; padding: 12px; border-radius: 8px; border:1px solid #ccc; font-size: 1rem; }
  button { background-color: #1677ff; color: white; border: none; cursor: pointer; }
  button:hover { background-color: #0f5ed7; }
  .result { margin-top: 20px; background: #f0f8ff; padding: 20px; border-radius: 12px; display: none; }
</style>
</head>
<body>
  <div class="container">
    <h2>Currency Converter</h2>
    <input type="number" id="amount" placeholder="Enter amount" />
    <select id="fromCurrency"></select>
    <select id="toCurrency"></select>
    <button id="convertBtn">Convert</button>
    <div id="result" class="result">
      <h3>Result:</h3>
      <div id="convertedAmount"></div>
    </div>
  </div>

<script>
  const currencies = {
    "USD": "US Dollar",
    "PKR": "Pakistani Rupee",
    "EUR": "Euro",
    "GBP": "British Pound",
    "INR": "Indian Rupee",
    "JPY": "Japanese Yen",
    "CNY": "Chinese Yuan",
    "AED": "UAE Dirham"
  };

  const fromSelect = document.getElementById("fromCurrency");
  const toSelect = document.getElementById("toCurrency");
  const amountInput = document.getElementById("amount");
  const convertBtn = document.getElementById("convertBtn");
  const resultDiv = document.getElementById("result");
  const convertedAmount = document.getElementById("convertedAmount");

  // populate selects
  for (let [code, name] of Object.entries(currencies)) {
    const opt1 = document.createElement("option");
    const opt2 = document.createElement("option");
    opt1.value = code; opt2.value = code;
    opt1.textContent = `${name} (${code})`;
    opt2.textContent = `${name} (${code})`;
    fromSelect.appendChild(opt1);
    toSelect.appendChild(opt2);
  }
  fromSelect.value = "USD";
  toSelect.value = "PKR";

  convertBtn.addEventListener("click", async () => {
    const amount = parseFloat(amountInput.value);
    const from = fromSelect.value;
    const to = toSelect.value;

    if (!amount || amount <= 0) {
      alert("Please enter a valid amount");
      return;
    }

    // Use a reliable API (fixing potential API issues)
    const api = `https://api.exchangerate.host/convert?from=${from}&to=${to}&amount=${amount}`;

    try {
      const resp = await fetch(api);
      if (!resp.ok) throw new Error(`HTTP error! status: ${resp.status}`);
      const data = await resp.json();
      console.log("API response:", data);
      if (data && data.result != null) {
        const result = data.result.toFixed(2);
        convertedAmount.textContent = `${amount} ${from} = ${result} ${to}`;
        resultDiv.style.display = "block";
      } else {
        throw new Error("No result field in API response");
      }
    } catch (err) {
      console.error("Conversion error:", err);
      alert("Error fetching exchange rate. Check console for details.");
    }
  });
</script>
</body>
</html>
